# SQL Query Analysis and Indexing

This document contains the performance analysis of 18 SQL queries on the tournament database, before and after adding indexes.

---

## 1. Show a list of all tournaments

### Before adding indexes

```text
QUERY PLAN
Hash Left Join  (cost=3.69..16.10 rows=190 width=366) (actual time=0.057..0.058 rows=5.00 loops=1)
  Hash Cond: (t.winnerteamid = tm.teamid)
  Buffers: shared hit=3
  ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=362) (actual time=0.015..0.016 rows=5.00 loops=1)
        Buffers: shared hit=1
  ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.033..0.034 rows=75.00 loops=1)
        Buckets: 1024  Batches: 1  Memory Usage: 12kB
        Buffers: shared hit=2
        ->  Seq Scan on teams tm  (cost=0.00..2.75 rows=75 width=12) (actual time=0.006..0.015 rows=75.00 loops=1)
              Buffers: shared hit=2
Planning Time: 0.155 ms
Execution Time: 0.116 ms
```

### After adding indexes

```text
"QUERY PLAN"
"Hash Left Join  (cost=3.69..16.10 rows=190 width=366) (actual time=0.044..0.045 rows=5.00 loops=1)"
"  Hash Cond: (t.winnerteamid = tm.teamid)"
"  Buffers: shared hit=3"
"  ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=362) (actual time=0.014..0.015 rows=5.00 loops=1)"
"        Buffers: shared hit=1"
"  ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.024..0.024 rows=75.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"        Buffers: shared hit=2"
"        ->  Seq Scan on teams tm  (cost=0.00..2.75 rows=75 width=12) (actual time=0.006..0.013 rows=75.00 loops=1)"
"              Buffers: shared hit=2"
"Planning Time: 0.114 ms"
"Execution Time: 0.066 ms"
```

## 2. Show all teams participating in a specific tournament

### Before adding indexes

```text
"QUERY PLAN"
"Hash Right Join  (cost=6.88..33.83 rows=32 width=40) (actual time=0.066..0.191 rows=32.00 loops=1)"
"  Hash Cond: (p.playerid = te.captainid)"
"  Buffers: shared hit=15"
"  ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=17) (actual time=0.005..0.054 rows=1125.00 loops=1)"
"        Buffers: shared hit=11"
"  ->  Hash  (cost=6.48..6.48 rows=32 width=12) (actual time=0.055..0.055 rows=32.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"        Buffers: shared hit=4"
"        ->  Hash Join  (cost=3.52..6.48 rows=32 width=12) (actual time=0.038..0.051 rows=32.00 loops=1)"
"              Hash Cond: (te.teamid = s.teamid)"
"              Buffers: shared hit=4"
"              ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=16) (actual time=0.012..0.015 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=3.12..3.12 rows=32 width=4) (actual time=0.020..0.020 rows=32.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on standings s  (cost=0.00..3.12 rows=32 width=4) (actual time=0.007..0.014 rows=32.00 loops=1)"
"                          Filter: (tournamentid = 1)"
"                          Rows Removed by Filter: 58"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=10"
"Planning Time: 0.570 ms"
"Execution Time: 0.277 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Hash Right Join  (cost=6.88..33.83 rows=32 width=40) (actual time=0.055..0.176 rows=32.00 loops=1)"
"  Hash Cond: (p.playerid = te.captainid)"
"  Buffers: shared hit=15"
"  ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=17) (actual time=0.005..0.051 rows=1125.00 loops=1)"
"        Buffers: shared hit=11"
"  ->  Hash  (cost=6.48..6.48 rows=32 width=12) (actual time=0.045..0.046 rows=32.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"        Buffers: shared hit=4"
"        ->  Hash Join  (cost=3.52..6.48 rows=32 width=12) (actual time=0.030..0.042 rows=32.00 loops=1)"
"              Hash Cond: (te.teamid = s.teamid)"
"              Buffers: shared hit=4"
"              ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=16) (actual time=0.008..0.011 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=3.12..3.12 rows=32 width=4) (actual time=0.019..0.020 rows=32.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on standings s  (cost=0.00..3.12 rows=32 width=4) (actual time=0.008..0.015 rows=32.00 loops=1)"
"                          Filter: (tournamentid = 1)"
"                          Rows Removed by Filter: 58"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=100 read=10 dirtied=3"
"Planning Time: 8.530 ms"
"Execution Time: 0.198 ms"
```

## 3. Show all players from a specific team

### Before adding indexes

```text
"QUERY PLAN"
"Seq Scan on players  (cost=0.00..25.14 rows=15 width=38) (actual time=0.012..0.094 rows=15.00 loops=1)"
"  Filter: (teamid = 1)"
"  Rows Removed by Filter: 1110"
"  Buffers: shared hit=11"
"Planning Time: 0.062 ms"
"Execution Time: 0.107 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Index Scan using players_teamid on players  (cost=0.28..8.62 rows=15 width=38) (actual time=0.070..0.074 rows=15.00 loops=1)"
"  Index Cond: (teamid = 1)"
"  Index Searches: 1"
"  Buffers: shared hit=1 read=2"
"Planning Time: 0.086 ms"
"Execution Time: 0.089 ms"
```

## 4. Show all matches of a specific tournament

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=25.63..25.67 rows=15 width=158) (actual time=0.122..0.124 rows=15.00 loops=1)"
"  Sort Key: m.matchdate"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=14"
"  ->  Nested Loop  (cost=6.67..25.34 rows=15 width=158) (actual time=0.082..0.103 rows=15.00 loops=1)"
"        Buffers: shared hit=14"
"        ->  Hash Join  (cost=6.51..10.07 rows=15 width=36) (actual time=0.066..0.077 rows=15.00 loops=1)"
"              Hash Cond: (t1.teamid = m.team1id)"
"              Buffers: shared hit=6"
"              ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.013..0.016 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=6.32..6.32 rows=15 width=32) (actual time=0.046..0.046 rows=15.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=4"
"                    ->  Hash Join  (cost=3.05..6.32 rows=15 width=32) (actual time=0.031..0.043 rows=15.00 loops=1)"
"                          Hash Cond: (t2.teamid = m.team2id)"
"                          Buffers: shared hit=4"
"                          ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.002..0.005 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=2.86..2.86 rows=15 width=28) (actual time=0.023..0.023 rows=15.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=2"
"                                ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=28) (actual time=0.007..0.013 rows=15.00 loops=1)"
"                                      Filter: (tournamentid = 1)"
"                                      Rows Removed by Filter: 54"
"                                      Buffers: shared hit=2"
"        ->  Memoize  (cost=0.16..3.11 rows=1 width=102) (actual time=0.001..0.001 rows=1.00 loops=15)"
"              Cache Key: m.matchtypeid"
"              Cache Mode: logical"
"              Hits: 11  Misses: 4  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"              Buffers: shared hit=8"
"              ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..3.10 rows=1 width=102) (actual time=0.003..0.003 rows=1.00 loops=4)"
"                    Index Cond: (matchtypeid = m.matchtypeid)"
"                    Index Searches: 4"
"                    Buffers: shared hit=8"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.342 ms"
"Execution Time: 0.215 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=11.77..11.81 rows=15 width=158) (actual time=0.149..0.150 rows=15.00 loops=1)"
"  Sort Key: m.matchdate"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=7"
"  ->  Hash Join  (cost=7.62..11.48 rows=15 width=158) (actual time=0.125..0.140 rows=15.00 loops=1)"
"        Hash Cond: (m.matchtypeid = mt.matchtypeid)"
"        Buffers: shared hit=7"
"        ->  Hash Join  (cost=6.51..10.07 rows=15 width=36) (actual time=0.050..0.061 rows=15.00 loops=1)"
"              Hash Cond: (t1.teamid = m.team1id)"
"              Buffers: shared hit=6"
"              ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.005..0.008 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=6.32..6.32 rows=15 width=32) (actual time=0.041..0.042 rows=15.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=4"
"                    ->  Hash Join  (cost=3.05..6.32 rows=15 width=32) (actual time=0.028..0.038 rows=15.00 loops=1)"
"                          Hash Cond: (t2.teamid = m.team2id)"
"                          Buffers: shared hit=4"
"                          ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.003..0.006 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=2.86..2.86 rows=15 width=28) (actual time=0.018..0.018 rows=15.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=2"
"                                ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=28) (actual time=0.008..0.015 rows=15.00 loops=1)"
"                                      Filter: (tournamentid = 1)"
"                                      Rows Removed by Filter: 54"
"                                      Buffers: shared hit=2"
"        ->  Hash  (cost=1.05..1.05 rows=5 width=102) (actual time=0.070..0.070 rows=5.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=1"
"              ->  Seq Scan on matchtypes mt  (cost=0.00..1.05 rows=5 width=102) (actual time=0.058..0.059 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"Planning:"
"  Buffers: shared hit=138 read=11"
"Planning Time: 1.818 ms"
"Execution Time: 0.202 ms"
```

## 5. Show all matches of a specific team across all tournaments

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=40.61..40.62 rows=5 width=296) (actual time=0.179..0.181 rows=4.00 loops=1)"
"  Sort Key: m.matchdate"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=15"
"  ->  Nested Loop  (cost=10.01..40.55 rows=5 width=296) (actual time=0.161..0.170 rows=4.00 loops=1)"
"        Buffers: shared hit=15"
"        ->  Hash Join  (cost=9.85..23.47 rows=5 width=174) (actual time=0.145..0.147 rows=4.00 loops=1)"
"              Hash Cond: (t.tournamentid = m.tournamentid)"
"              Buffers: shared hit=7"
"              ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=142) (actual time=0.029..0.029 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"              ->  Hash  (cost=9.79..9.79 rows=5 width=40) (actual time=0.106..0.107 rows=4.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=6"
"                    ->  Hash Join  (cost=6.33..9.79 rows=5 width=40) (actual time=0.097..0.105 rows=4.00 loops=1)"
"                          Hash Cond: (t1.teamid = m.team1id)"
"                          Buffers: shared hit=6"
"                          ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.015..0.018 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=6.27..6.27 rows=5 width=36) (actual time=0.075..0.075 rows=4.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=4"
"                                ->  Hash Join  (cost=3.10..6.27 rows=5 width=36) (actual time=0.053..0.071 rows=4.00 loops=1)"
"                                      Hash Cond: (t2.teamid = m.team2id)"
"                                      Buffers: shared hit=4"
"                                      ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.007..0.014 rows=75.00 loops=1)"
"                                            Buffers: shared hit=2"
"                                      ->  Hash  (cost=3.04..3.04 rows=5 width=32) (actual time=0.029..0.029 rows=4.00 loops=1)"
"                                            Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                            Buffers: shared hit=2"
"                                            ->  Seq Scan on matches m  (cost=0.00..3.04 rows=5 width=32) (actual time=0.011..0.024 rows=4.00 loops=1)"
"                                                  Filter: ((1 = team1id) OR (1 = team2id))"
"                                                  Rows Removed by Filter: 65"
"                                                  Buffers: shared hit=2"
"        ->  Memoize  (cost=0.16..4.98 rows=1 width=102) (actual time=0.004..0.004 rows=1.00 loops=4)"
"              Cache Key: m.matchtypeid"
"              Cache Mode: logical"
"              Hits: 0  Misses: 4  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"              Buffers: shared hit=8"
"              ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..4.97 rows=1 width=102) (actual time=0.003..0.003 rows=1.00 loops=4)"
"                    Index Cond: (matchtypeid = m.matchtypeid)"
"                    Index Searches: 4"
"                    Buffers: shared hit=8"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.815 ms"
"Execution Time: 0.329 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=24.74..24.75 rows=5 width=296) (actual time=0.096..0.098 rows=4.00 loops=1)"
"  Sort Key: m.matchdate"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=8"
"  ->  Hash Join  (cost=10.97..24.68 rows=5 width=296) (actual time=0.087..0.091 rows=4.00 loops=1)"
"        Hash Cond: (m.matchtypeid = mt.matchtypeid)"
"        Buffers: shared hit=8"
"        ->  Hash Join  (cost=9.85..23.47 rows=5 width=174) (actual time=0.059..0.061 rows=4.00 loops=1)"
"              Hash Cond: (t.tournamentid = m.tournamentid)"
"              Buffers: shared hit=7"
"              ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=142) (actual time=0.004..0.005 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"              ->  Hash  (cost=9.79..9.79 rows=5 width=40) (actual time=0.050..0.051 rows=4.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=6"
"                    ->  Hash Join  (cost=6.33..9.79 rows=5 width=40) (actual time=0.040..0.049 rows=4.00 loops=1)"
"                          Hash Cond: (t1.teamid = m.team1id)"
"                          Buffers: shared hit=6"
"                          ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.004..0.007 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=6.27..6.27 rows=5 width=36) (actual time=0.032..0.032 rows=4.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=4"
"                                ->  Hash Join  (cost=3.10..6.27 rows=5 width=36) (actual time=0.022..0.030 rows=4.00 loops=1)"
"                                      Hash Cond: (t2.teamid = m.team2id)"
"                                      Buffers: shared hit=4"
"                                      ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.003..0.006 rows=75.00 loops=1)"
"                                            Buffers: shared hit=2"
"                                      ->  Hash  (cost=3.04..3.04 rows=5 width=32) (actual time=0.013..0.013 rows=4.00 loops=1)"
"                                            Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                            Buffers: shared hit=2"
"                                            ->  Seq Scan on matches m  (cost=0.00..3.04 rows=5 width=32) (actual time=0.005..0.011 rows=4.00 loops=1)"
"                                                  Filter: ((1 = team1id) OR (1 = team2id))"
"                                                  Rows Removed by Filter: 65"
"                                                  Buffers: shared hit=2"
"        ->  Hash  (cost=1.05..1.05 rows=5 width=102) (actual time=0.022..0.022 rows=5.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=1"
"              ->  Seq Scan on matchtypes mt  (cost=0.00..1.05 rows=5 width=102) (actual time=0.017..0.017 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"Planning:"
"  Buffers: shared hit=16"
"Planning Time: 0.744 ms"
"Execution Time: 0.163 ms"
```

## 6. List all events (goals, cards) for a specific match

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=40.61..40.62 rows=5 width=296) (actual time=0.179..0.181 rows=4.00 loops=1)"
"  Sort Key: m.matchdate"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=15"
"  ->  Nested Loop  (cost=10.01..40.55 rows=5 width=296) (actual time=0.161..0.170 rows=4.00 loops=1)"
"        Buffers: shared hit=15"
"        ->  Hash Join  (cost=9.85..23.47 rows=5 width=174) (actual time=0.145..0.147 rows=4.00 loops=1)"
"              Hash Cond: (t.tournamentid = m.tournamentid)"
"              Buffers: shared hit=7"
"              ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=142) (actual time=0.029..0.029 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"              ->  Hash  (cost=9.79..9.79 rows=5 width=40) (actual time=0.106..0.107 rows=4.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=6"
"                    ->  Hash Join  (cost=6.33..9.79 rows=5 width=40) (actual time=0.097..0.105 rows=4.00 loops=1)"
"                          Hash Cond: (t1.teamid = m.team1id)"
"                          Buffers: shared hit=6"
"                          ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.015..0.018 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=6.27..6.27 rows=5 width=36) (actual time=0.075..0.075 rows=4.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=4"
"                                ->  Hash Join  (cost=3.10..6.27 rows=5 width=36) (actual time=0.053..0.071 rows=4.00 loops=1)"
"                                      Hash Cond: (t2.teamid = m.team2id)"
"                                      Buffers: shared hit=4"
"                                      ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.007..0.014 rows=75.00 loops=1)"
"                                            Buffers: shared hit=2"
"                                      ->  Hash  (cost=3.04..3.04 rows=5 width=32) (actual time=0.029..0.029 rows=4.00 loops=1)"
"                                            Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                            Buffers: shared hit=2"
"                                            ->  Seq Scan on matches m  (cost=0.00..3.04 rows=5 width=32) (actual time=0.011..0.024 rows=4.00 loops=1)"
"                                                  Filter: ((1 = team1id) OR (1 = team2id))"
"                                                  Rows Removed by Filter: 65"
"                                                  Buffers: shared hit=2"
"        ->  Memoize  (cost=0.16..4.98 rows=1 width=102) (actual time=0.004..0.004 rows=1.00 loops=4)"
"              Cache Key: m.matchtypeid"
"              Cache Mode: logical"
"              Hits: 0  Misses: 4  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"              Buffers: shared hit=8"
"              ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..4.97 rows=1 width=102) (actual time=0.003..0.003 rows=1.00 loops=4)"
"                    Index Cond: (matchtypeid = m.matchtypeid)"
"                    Index Searches: 4"
"                    Buffers: shared hit=8"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.815 ms"
"Execution Time: 0.329 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=36.79..36.80 rows=5 width=38) (actual time=0.166..0.167 rows=5.00 loops=1)"
"  Sort Key: e.minute"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=14"
"  ->  Hash Join  (cost=7.38..36.73 rows=5 width=38) (actual time=0.044..0.161 rows=5.00 loops=1)"
"        Hash Cond: (p.playerid = e.playerid)"
"        Buffers: shared hit=14"
"        ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=17) (actual time=0.008..0.052 rows=1125.00 loops=1)"
"              Buffers: shared hit=11"
"        ->  Hash  (cost=7.31..7.31 rows=5 width=10) (actual time=0.030..0.031 rows=5.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=3"
"              ->  Seq Scan on events e  (cost=0.00..7.31 rows=5 width=10) (actual time=0.006..0.025 rows=5.00 loops=1)"
"                    Filter: (matchid = 1)"
"                    Rows Removed by Filter: 340"
"                    Buffers: shared hit=3"
"Planning:"
"  Buffers: shared hit=40 read=3"
"Planning Time: 0.782 ms"
"Execution Time: 0.189 ms"
```

## 7. Show all players who received a yellow or red card in the entire tournament

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=52.39..52.50 rows=44 width=69) (actual time=0.245..0.248 rows=42.00 loops=1)"
"  Sort Key: (count(*)) DESC"
"  Sort Method: quicksort  Memory: 28kB"
"  Buffers: shared hit=141"
"  ->  HashAggregate  (cost=50.53..51.19 rows=44 width=69) (actual time=0.223..0.234 rows=42.00 loops=1)"
"        Group Key: p.playerid, te.teamid"
"        Batches: 1  Memory Usage: 32kB"
"        Buffers: shared hit=141"
"        ->  Nested Loop  (cost=7.16..50.20 rows=44 width=29) (actual time=0.087..0.207 rows=44.00 loops=1)"
"              Buffers: shared hit=141"
"              ->  Index Only Scan using tournaments_pkey on tournaments t  (cost=0.14..8.16 rows=1 width=4) (actual time=0.013..0.014 rows=1.00 loops=1)"
"                    Index Cond: (tournamentid = 1)"
"                    Heap Fetches: 1"
"                    Index Searches: 1"
"                    Buffers: shared hit=2"
"              ->  Hash Join  (cost=7.01..41.60 rows=44 width=33) (actual time=0.072..0.188 rows=44.00 loops=1)"
"                    Hash Cond: (p.teamid = te.teamid)"
"                    Buffers: shared hit=139"
"                    ->  Nested Loop  (cost=3.33..37.78 rows=44 width=25) (actual time=0.030..0.138 rows=44.00 loops=1)"
"                          Buffers: shared hit=137"
"                          ->  Hash Join  (cost=3.05..10.93 rows=44 width=8) (actual time=0.025..0.075 rows=44.00 loops=1)"
"                                Hash Cond: (e.matchid = m.matchid)"
"                                Buffers: shared hit=5"
"                                ->  Seq Scan on events e  (cost=0.00..7.31 rows=203 width=8) (actual time=0.007..0.041 rows=203.00 loops=1)"
"                                      Filter: (type = ANY ('{Yellow,Red}'::eventtype[]))"
"                                      Rows Removed by Filter: 142"
"                                      Buffers: shared hit=3"
"                                ->  Hash  (cost=2.86..2.86 rows=15 width=8) (actual time=0.013..0.013 rows=15.00 loops=1)"
"                                      Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                      Buffers: shared hit=2"
"                                      ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=8) (actual time=0.006..0.010 rows=15.00 loops=1)"
"                                            Filter: (tournamentid = 1)"
"                                            Rows Removed by Filter: 54"
"                                            Buffers: shared hit=2"
"                          ->  Index Scan using players_pkey on players p  (cost=0.28..0.61 rows=1 width=21) (actual time=0.001..0.001 rows=1.00 loops=44)"
"                                Index Cond: (playerid = e.playerid)"
"                                Index Searches: 44"
"                                Buffers: shared hit=132"
"                    ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.037..0.037 rows=75.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.019..0.025 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=14"
"Planning Time: 0.385 ms"
"Execution Time: 0.336 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=52.39..52.50 rows=44 width=69) (actual time=0.270..0.272 rows=42.00 loops=1)"
"  Sort Key: (count(*)) DESC"
"  Sort Method: quicksort  Memory: 28kB"
"  Buffers: shared hit=141"
"  ->  HashAggregate  (cost=50.53..51.19 rows=44 width=69) (actual time=0.249..0.259 rows=42.00 loops=1)"
"        Group Key: p.playerid, te.teamid"
"        Batches: 1  Memory Usage: 32kB"
"        Buffers: shared hit=141"
"        ->  Nested Loop  (cost=7.16..50.20 rows=44 width=29) (actual time=0.112..0.233 rows=44.00 loops=1)"
"              Buffers: shared hit=141"
"              ->  Index Only Scan using tournaments_pkey on tournaments t  (cost=0.14..8.16 rows=1 width=4) (actual time=0.025..0.025 rows=1.00 loops=1)"
"                    Index Cond: (tournamentid = 1)"
"                    Heap Fetches: 1"
"                    Index Searches: 1"
"                    Buffers: shared hit=2"
"              ->  Hash Join  (cost=7.01..41.60 rows=44 width=33) (actual time=0.086..0.202 rows=44.00 loops=1)"
"                    Hash Cond: (p.teamid = te.teamid)"
"                    Buffers: shared hit=139"
"                    ->  Nested Loop  (cost=3.33..37.78 rows=44 width=25) (actual time=0.033..0.141 rows=44.00 loops=1)"
"                          Buffers: shared hit=137"
"                          ->  Hash Join  (cost=3.05..10.93 rows=44 width=8) (actual time=0.026..0.076 rows=44.00 loops=1)"
"                                Hash Cond: (e.matchid = m.matchid)"
"                                Buffers: shared hit=5"
"                                ->  Seq Scan on events e  (cost=0.00..7.31 rows=203 width=8) (actual time=0.007..0.041 rows=203.00 loops=1)"
"                                      Filter: (type = ANY ('{Yellow,Red}'::eventtype[]))"
"                                      Rows Removed by Filter: 142"
"                                      Buffers: shared hit=3"
"                                ->  Hash  (cost=2.86..2.86 rows=15 width=8) (actual time=0.014..0.015 rows=15.00 loops=1)"
"                                      Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                      Buffers: shared hit=2"
"                                      ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=8) (actual time=0.005..0.011 rows=15.00 loops=1)"
"                                            Filter: (tournamentid = 1)"
"                                            Rows Removed by Filter: 54"
"                                            Buffers: shared hit=2"
"                          ->  Index Scan using players_pkey on players p  (cost=0.28..0.61 rows=1 width=21) (actual time=0.001..0.001 rows=1.00 loops=44)"
"                                Index Cond: (playerid = e.playerid)"
"                                Index Searches: 44"
"                                Buffers: shared hit=132"
"                    ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.045..0.045 rows=75.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.020..0.029 rows=75.00 loops=1)"
"                                Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=18"
"Planning Time: 0.930 ms"
"Execution Time: 0.374 ms"
```

## 8. Show all scorers of the tournament

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=39.11..39.19 rows=31 width=52) (actual time=0.174..0.176 rows=29.00 loops=1)"
"  Sort Key: (count(*)) DESC"
"  Sort Method: quicksort  Memory: 26kB"
"  Buffers: shared hit=100"
"  ->  HashAggregate  (cost=37.88..38.34 rows=31 width=52) (actual time=0.158..0.165 rows=29.00 loops=1)"
"        Group Key: p.playerid, te.name"
"        Batches: 1  Memory Usage: 32kB"
"        Buffers: shared hit=100"
"        ->  Hash Join  (cost=7.01..37.64 rows=31 width=25) (actual time=0.062..0.145 rows=31.00 loops=1)"
"              Hash Cond: (p.teamid = te.teamid)"
"              Buffers: shared hit=100"
"              ->  Nested Loop  (cost=3.33..33.88 rows=31 width=21) (actual time=0.031..0.106 rows=31.00 loops=1)"
"                    Buffers: shared hit=98"
"                    ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.024..0.059 rows=31.00 loops=1)"
"                          Hash Cond: (e.matchid = m.matchid)"
"                          Buffers: shared hit=5"
"                          ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=8) (actual time=0.005..0.030 rows=142.00 loops=1)"
"                                Filter: (type = 'Goal'::eventtype)"
"                                Rows Removed by Filter: 203"
"                                Buffers: shared hit=3"
"                          ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.015..0.015 rows=15.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=2"
"                                ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=4) (actual time=0.007..0.012 rows=15.00 loops=1)"
"                                      Filter: (tournamentid = 1)"
"                                      Rows Removed by Filter: 54"
"                                      Buffers: shared hit=2"
"                    ->  Index Scan using players_pkey on players p  (cost=0.28..0.75 rows=1 width=21) (actual time=0.001..0.001 rows=1.00 loops=31)"
"                          Index Cond: (playerid = e.playerid)"
"                          Index Searches: 31"
"                          Buffers: shared hit=93"
"              ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.028..0.028 rows=75.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.009..0.017 rows=75.00 loops=1)"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=14"
"Planning Time: 0.290 ms"
"Execution Time: 0.230 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=39.11..39.19 rows=31 width=52) (actual time=0.194..0.196 rows=29.00 loops=1)"
"  Sort Key: (count(*)) DESC"
"  Sort Method: quicksort  Memory: 26kB"
"  Buffers: shared hit=100"
"  ->  HashAggregate  (cost=37.88..38.34 rows=31 width=52) (actual time=0.179..0.187 rows=29.00 loops=1)"
"        Group Key: p.playerid, te.name"
"        Batches: 1  Memory Usage: 32kB"
"        Buffers: shared hit=100"
"        ->  Hash Join  (cost=7.01..37.64 rows=31 width=25) (actual time=0.083..0.166 rows=31.00 loops=1)"
"              Hash Cond: (p.teamid = te.teamid)"
"              Buffers: shared hit=100"
"              ->  Nested Loop  (cost=3.33..33.88 rows=31 width=21) (actual time=0.043..0.120 rows=31.00 loops=1)"
"                    Buffers: shared hit=98"
"                    ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.030..0.065 rows=31.00 loops=1)"
"                          Hash Cond: (e.matchid = m.matchid)"
"                          Buffers: shared hit=5"
"                          ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=8) (actual time=0.005..0.029 rows=142.00 loops=1)"
"                                Filter: (type = 'Goal'::eventtype)"
"                                Rows Removed by Filter: 203"
"                                Buffers: shared hit=3"
"                          ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.015..0.015 rows=15.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=2"
"                                ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=4) (actual time=0.006..0.011 rows=15.00 loops=1)"
"                                      Filter: (tournamentid = 1)"
"                                      Rows Removed by Filter: 54"
"                                      Buffers: shared hit=2"
"                    ->  Index Scan using players_pkey on players p  (cost=0.28..0.75 rows=1 width=21) (actual time=0.001..0.001 rows=1.00 loops=31)"
"                          Index Cond: (playerid = e.playerid)"
"                          Index Searches: 31"
"                          Buffers: shared hit=93"
"              ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.035..0.036 rows=75.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.011..0.019 rows=75.00 loops=1)"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=18"
"Planning Time: 0.409 ms"
"Execution Time: 0.249 ms"
```

## 9. Show the points table for a specific tournament

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=7.28..7.36 rows=32 width=12) (actual time=0.055..0.056 rows=32.00 loops=1)"
"  Sort Key: s.points DESC"
"  Sort Method: quicksort  Memory: 26kB"
"  Buffers: shared hit=4"
"  ->  Hash Join  (cost=3.52..6.48 rows=32 width=12) (actual time=0.033..0.047 rows=32.00 loops=1)"
"        Hash Cond: (te.teamid = s.teamid)"
"        Buffers: shared hit=4"
"        ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.009..0.012 rows=75.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Hash  (cost=3.12..3.12 rows=32 width=8) (actual time=0.019..0.019 rows=32.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"              Buffers: shared hit=2"
"              ->  Seq Scan on standings s  (cost=0.00..3.12 rows=32 width=8) (actual time=0.006..0.013 rows=32.00 loops=1)"
"                    Filter: (tournamentid = 1)"
"                    Rows Removed by Filter: 58"
"                    Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=4"
"Planning Time: 0.172 ms"
"Execution Time: 0.075 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=7.28..7.36 rows=32 width=12) (actual time=0.107..0.111 rows=32.00 loops=1)"
"  Sort Key: s.points DESC"
"  Sort Method: quicksort  Memory: 26kB"
"  Buffers: shared hit=4"
"  ->  Hash Join  (cost=3.52..6.48 rows=32 width=12) (actual time=0.065..0.092 rows=32.00 loops=1)"
"        Hash Cond: (te.teamid = s.teamid)"
"        Buffers: shared hit=4"
"        ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.018..0.025 rows=75.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Hash  (cost=3.12..3.12 rows=32 width=8) (actual time=0.036..0.036 rows=32.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 10kB"
"              Buffers: shared hit=2"
"              ->  Seq Scan on standings s  (cost=0.00..3.12 rows=32 width=8) (actual time=0.009..0.025 rows=32.00 loops=1)"
"                    Filter: (tournamentid = 1)"
"                    Rows Removed by Filter: 58"
"                    Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.441 ms"
"Execution Time: 0.145 ms"
```

## 10. Show all final matches in history

### Before adding indexes

```text
"QUERY PLAN"
"Nested Loop  (cost=0.45..9.50 rows=1 width=60) (actual time=0.041..0.070 rows=5.00 loops=1)"
"  Buffers: shared hit=30"
"  ->  Nested Loop  (cost=0.30..9.09 rows=1 width=28) (actual time=0.037..0.060 rows=5.00 loops=1)"
"        Buffers: shared hit=20"
"        ->  Nested Loop  (cost=0.16..8.69 rows=1 width=24) (actual time=0.033..0.051 rows=5.00 loops=1)"
"              Buffers: shared hit=10"
"              ->  Seq Scan on matches m  (cost=0.00..2.69 rows=69 width=28) (actual time=0.011..0.015 rows=69.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Memoize  (cost=0.16..0.88 rows=1 width=4) (actual time=0.000..0.000 rows=0.07 loops=69)"
"                    Cache Key: m.matchtypeid"
"                    Cache Mode: logical"
"                    Hits: 65  Misses: 4  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"                    Buffers: shared hit=8"
"                    ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..0.87 rows=1 width=4) (actual time=0.003..0.003 rows=0.25 loops=4)"
"                          Index Cond: (matchtypeid = m.matchtypeid)"
"                          Filter: ((matchtype)::text = 'Final'::text)"
"                          Rows Removed by Filter: 1"
"                          Index Searches: 4"
"                          Buffers: shared hit=8"
"        ->  Index Scan using teams_pkey on teams t1  (cost=0.14..0.39 rows=1 width=12) (actual time=0.001..0.001 rows=1.00 loops=5)"
"              Index Cond: (teamid = m.team1id)"
"              Index Searches: 5"
"              Buffers: shared hit=10"
"  ->  Index Scan using teams_pkey on teams t2  (cost=0.14..0.39 rows=1 width=12) (actual time=0.001..0.001 rows=1.00 loops=5)"
"        Index Cond: (teamid = m.team2id)"
"        Index Searches: 5"
"        Buffers: shared hit=10"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.321 ms"
"Execution Time: 0.103 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Hash Join  (cost=7.62..11.00 rows=14 width=60) (actual time=0.143..0.164 rows=5.00 loops=1)"
"  Hash Cond: (t2.teamid = m.team2id)"
"  Buffers: shared hit=7"
"  ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.025..0.032 rows=75.00 loops=1)"
"        Buffers: shared hit=2"
"  ->  Hash  (cost=7.45..7.45 rows=14 width=28) (actual time=0.105..0.108 rows=5.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"        Buffers: shared hit=5"
"        ->  Hash Join  (cost=4.28..7.45 rows=14 width=28) (actual time=0.082..0.102 rows=5.00 loops=1)"
"              Hash Cond: (t1.teamid = m.team1id)"
"              Buffers: shared hit=5"
"              ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.007..0.013 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=4.10..4.10 rows=14 width=24) (actual time=0.069..0.070 rows=5.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=3"
"                    ->  Hash Join  (cost=1.07..4.10 rows=14 width=24) (actual time=0.047..0.065 rows=5.00 loops=1)"
"                          Hash Cond: (m.matchtypeid = mt.matchtypeid)"
"                          Buffers: shared hit=3"
"                          ->  Seq Scan on matches m  (cost=0.00..2.69 rows=69 width=28) (actual time=0.008..0.013 rows=69.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Hash  (cost=1.06..1.06 rows=1 width=4) (actual time=0.026..0.026 rows=1.00 loops=1)"
"                                Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                                Buffers: shared hit=1"
"                                ->  Seq Scan on matchtypes mt  (cost=0.00..1.06 rows=1 width=4) (actual time=0.021..0.022 rows=1.00 loops=1)"
"                                      Filter: ((matchtype)::text = 'Final'::text)"
"                                      Rows Removed by Filter: 4"
"                                      Buffers: shared hit=1"
"Planning:"
"  Buffers: shared hit=16"
"Planning Time: 0.584 ms"
"Execution Time: 0.265 ms"
```

## 11. Show all match types

### Before adding indexes

```text
"QUERY PLAN"
"HashAggregate  (cost=9.02..9.71 rows=69 width=106) (actual time=0.074..0.075 rows=4.00 loops=1)"
"  Group Key: mt.matchtype"
"  Batches: 1  Memory Usage: 32kB"
"  Buffers: shared hit=10"
"  ->  Nested Loop  (cost=0.16..8.68 rows=69 width=98) (actual time=0.027..0.058 rows=69.00 loops=1)"
"        Buffers: shared hit=10"
"        ->  Seq Scan on matches m  (cost=0.00..2.69 rows=69 width=4) (actual time=0.011..0.015 rows=69.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Memoize  (cost=0.16..0.87 rows=1 width=102) (actual time=0.000..0.000 rows=1.00 loops=69)"
"              Cache Key: m.matchtypeid"
"              Cache Mode: logical"
"              Hits: 65  Misses: 4  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"              Buffers: shared hit=8"
"              ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..0.86 rows=1 width=102) (actual time=0.003..0.003 rows=1.00 loops=4)"
"                    Index Cond: (matchtypeid = m.matchtypeid)"
"                    Index Searches: 4"
"                    Buffers: shared hit=8"
"Planning Time: 0.133 ms"
"Execution Time: 0.107 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"HashAggregate  (cost=4.48..4.53 rows=5 width=106) (actual time=0.124..0.126 rows=4.00 loops=1)"
"  Group Key: mt.matchtype"
"  Batches: 1  Memory Usage: 32kB"
"  Buffers: shared hit=3"
"  ->  Hash Join  (cost=1.11..4.14 rows=69 width=98) (actual time=0.062..0.095 rows=69.00 loops=1)"
"        Hash Cond: (m.matchtypeid = mt.matchtypeid)"
"        Buffers: shared hit=3"
"        ->  Seq Scan on matches m  (cost=0.00..2.69 rows=69 width=4) (actual time=0.021..0.028 rows=69.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Hash  (cost=1.05..1.05 rows=5 width=102) (actual time=0.020..0.020 rows=5.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=1"
"              ->  Seq Scan on matchtypes mt  (cost=0.00..1.05 rows=5 width=102) (actual time=0.010..0.012 rows=5.00 loops=1)"
"                    Buffers: shared hit=1"
"Planning Time: 0.291 ms"
"Execution Time: 0.179 ms"
```

## 12. Show all matches played on a specific date

### Before adding indexes

```text
"QUERY PLAN"
"Nested Loop  (cost=6.08..17.18 rows=1 width=146) (actual time=0.062..0.070 rows=1.00 loops=1)"
"  Buffers: shared hit=8"
"  ->  Hash Join  (cost=5.93..8.97 rows=1 width=24) (actual time=0.054..0.061 rows=1.00 loops=1)"
"        Hash Cond: (t2.teamid = m.team2id)"
"        Buffers: shared hit=6"
"        ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.010..0.013 rows=75.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Hash  (cost=5.92..5.92 rows=1 width=20) (actual time=0.033..0.034 rows=1.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=4"
"              ->  Hash Join  (cost=2.88..5.92 rows=1 width=20) (actual time=0.023..0.032 rows=1.00 loops=1)"
"                    Hash Cond: (t1.teamid = m.team1id)"
"                    Buffers: shared hit=4"
"                    ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.003..0.006 rows=75.00 loops=1)"
"                          Buffers: shared hit=2"
"                    ->  Hash  (cost=2.86..2.86 rows=1 width=16) (actual time=0.015..0.015 rows=1.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on matches m  (cost=0.00..2.86 rows=1 width=16) (actual time=0.008..0.013 rows=1.00 loops=1)"
"                                Filter: (matchdate = '2022-12-10'::date)"
"                                Rows Removed by Filter: 68"
"                                Buffers: shared hit=2"
"  ->  Index Scan using matchtypes_pkey on matchtypes mt  (cost=0.15..8.17 rows=1 width=102) (actual time=0.006..0.006 rows=1.00 loops=1)"
"        Index Cond: (matchtypeid = m.matchtypeid)"
"        Index Searches: 1"
"        Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.265 ms"
"Execution Time: 0.095 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Nested Loop  (cost=5.93..10.10 rows=1 width=146) (actual time=0.059..0.066 rows=1.00 loops=1)"
"  Join Filter: (mt.matchtypeid = m.matchtypeid)"
"  Rows Removed by Join Filter: 4"
"  Buffers: shared hit=7"
"  ->  Hash Join  (cost=5.93..8.97 rows=1 width=24) (actual time=0.052..0.060 rows=1.00 loops=1)"
"        Hash Cond: (t2.teamid = m.team2id)"
"        Buffers: shared hit=6"
"        ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.009..0.012 rows=75.00 loops=1)"
"              Buffers: shared hit=2"
"        ->  Hash  (cost=5.92..5.92 rows=1 width=20) (actual time=0.037..0.037 rows=1.00 loops=1)"
"              Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"              Buffers: shared hit=4"
"              ->  Hash Join  (cost=2.88..5.92 rows=1 width=20) (actual time=0.027..0.035 rows=1.00 loops=1)"
"                    Hash Cond: (t1.teamid = m.team1id)"
"                    Buffers: shared hit=4"
"                    ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.002..0.005 rows=75.00 loops=1)"
"                          Buffers: shared hit=2"
"                    ->  Hash  (cost=2.86..2.86 rows=1 width=16) (actual time=0.020..0.020 rows=1.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on matches m  (cost=0.00..2.86 rows=1 width=16) (actual time=0.007..0.012 rows=1.00 loops=1)"
"                                Filter: (matchdate = '2022-12-10'::date)"
"                                Rows Removed by Filter: 68"
"                                Buffers: shared hit=2"
"  ->  Seq Scan on matchtypes mt  (cost=0.00..1.05 rows=5 width=102) (actual time=0.004..0.004 rows=5.00 loops=1)"
"        Buffers: shared hit=1"
"Planning:"
"  Buffers: shared hit=16"
"Planning Time: 0.383 ms"
"Execution Time: 0.091 ms"
```

## 13. Show players with the most goals in a specific tournament

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=46.05..46.06 rows=1 width=57) (actual time=0.375..0.378 rows=2.00 loops=1)"
"  Sort Key: ((((p.firstname)::text || ' '::text) || (p.lastname)::text))"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=103"
"  InitPlan 1"
"    ->  Aggregate  (cost=11.61..11.62 rows=1 width=8) (actual time=0.100..0.101 rows=1.00 loops=1)"
"          Buffers: shared hit=5"
"          ->  HashAggregate  (cost=10.91..11.22 rows=31 width=12) (actual time=0.095..0.098 rows=29.00 loops=1)"
"                Group Key: e2.playerid"
"                Batches: 1  Memory Usage: 32kB"
"                Buffers: shared hit=5"
"                ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.036..0.085 rows=31.00 loops=1)"
"                      Hash Cond: (e2.matchid = m2.matchid)"
"                      Buffers: shared hit=5"
"                      ->  Seq Scan on events e2  (cost=0.00..7.31 rows=142 width=8) (actual time=0.008..0.042 rows=142.00 loops=1)"
"                            Filter: (type = 'Goal'::eventtype)"
"                            Rows Removed by Filter: 203"
"                            Buffers: shared hit=3"
"                      ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.019..0.020 rows=15.00 loops=1)"
"                            Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                            Buffers: shared hit=2"
"                            ->  Seq Scan on matches m2  (cost=0.00..2.86 rows=15 width=4) (actual time=0.005..0.015 rows=15.00 loops=1)"
"                                  Filter: (tournamentid = 1)"
"                                  Rows Removed by Filter: 54"
"                                  Buffers: shared hit=2"
"  ->  HashAggregate  (cost=34.03..34.42 rows=1 width=57) (actual time=0.358..0.363 rows=2.00 loops=1)"
"        Group Key: p.playerid"
"        Filter: (count(*) = (InitPlan 1).col1)"
"        Batches: 1  Memory Usage: 32kB"
"        Rows Removed by Filter: 27"
"        Buffers: shared hit=103"
"        ->  Nested Loop  (cost=3.33..33.88 rows=31 width=17) (actual time=0.068..0.236 rows=31.00 loops=1)"
"              Buffers: shared hit=98"
"              ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.055..0.136 rows=31.00 loops=1)"
"                    Hash Cond: (e.matchid = m.matchid)"
"                    Buffers: shared hit=5"
"                    ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=8) (actual time=0.021..0.077 rows=142.00 loops=1)"
"                          Filter: (type = 'Goal'::eventtype)"
"                          Rows Removed by Filter: 203"
"                          Buffers: shared hit=3"
"                    ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.024..0.025 rows=15.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=4) (actual time=0.007..0.017 rows=15.00 loops=1)"
"                                Filter: (tournamentid = 1)"
"                                Rows Removed by Filter: 54"
"                                Buffers: shared hit=2"
"              ->  Index Scan using players_pkey on players p  (cost=0.28..0.75 rows=1 width=17) (actual time=0.003..0.003 rows=1.00 loops=31)"
"                    Index Cond: (playerid = e.playerid)"
"                    Index Searches: 31"
"                    Buffers: shared hit=93"
"Planning:"
"  Buffers: shared hit=14"
"Planning Time: 0.662 ms"
"Execution Time: 0.486 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=46.05..46.06 rows=1 width=57) (actual time=0.207..0.208 rows=2.00 loops=1)"
"  Sort Key: ((((p.firstname)::text || ' '::text) || (p.lastname)::text))"
"  Sort Method: quicksort  Memory: 25kB"
"  Buffers: shared hit=103"
"  InitPlan 1"
"    ->  Aggregate  (cost=11.61..11.62 rows=1 width=8) (actual time=0.061..0.062 rows=1.00 loops=1)"
"          Buffers: shared hit=5"
"          ->  HashAggregate  (cost=10.91..11.22 rows=31 width=12) (actual time=0.056..0.059 rows=29.00 loops=1)"
"                Group Key: e2.playerid"
"                Batches: 1  Memory Usage: 32kB"
"                Buffers: shared hit=5"
"                ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.018..0.052 rows=31.00 loops=1)"
"                      Hash Cond: (e2.matchid = m2.matchid)"
"                      Buffers: shared hit=5"
"                      ->  Seq Scan on events e2  (cost=0.00..7.31 rows=142 width=8) (actual time=0.004..0.028 rows=142.00 loops=1)"
"                            Filter: (type = 'Goal'::eventtype)"
"                            Rows Removed by Filter: 203"
"                            Buffers: shared hit=3"
"                      ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.010..0.010 rows=15.00 loops=1)"
"                            Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                            Buffers: shared hit=2"
"                            ->  Seq Scan on matches m2  (cost=0.00..2.86 rows=15 width=4) (actual time=0.003..0.007 rows=15.00 loops=1)"
"                                  Filter: (tournamentid = 1)"
"                                  Rows Removed by Filter: 54"
"                                  Buffers: shared hit=2"
"  ->  HashAggregate  (cost=34.03..34.42 rows=1 width=57) (actual time=0.193..0.196 rows=2.00 loops=1)"
"        Group Key: p.playerid"
"        Filter: (count(*) = (InitPlan 1).col1)"
"        Batches: 1  Memory Usage: 32kB"
"        Rows Removed by Filter: 27"
"        Buffers: shared hit=103"
"        ->  Nested Loop  (cost=3.33..33.88 rows=31 width=17) (actual time=0.041..0.119 rows=31.00 loops=1)"
"              Buffers: shared hit=98"
"              ->  Hash Join  (cost=3.05..10.76 rows=31 width=4) (actual time=0.029..0.066 rows=31.00 loops=1)"
"                    Hash Cond: (e.matchid = m.matchid)"
"                    Buffers: shared hit=5"
"                    ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=8) (actual time=0.011..0.036 rows=142.00 loops=1)"
"                          Filter: (type = 'Goal'::eventtype)"
"                          Rows Removed by Filter: 203"
"                          Buffers: shared hit=3"
"                    ->  Hash  (cost=2.86..2.86 rows=15 width=4) (actual time=0.013..0.013 rows=15.00 loops=1)"
"                          Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                          Buffers: shared hit=2"
"                          ->  Seq Scan on matches m  (cost=0.00..2.86 rows=15 width=4) (actual time=0.004..0.009 rows=15.00 loops=1)"
"                                Filter: (tournamentid = 1)"
"                                Rows Removed by Filter: 54"
"                                Buffers: shared hit=2"
"              ->  Index Scan using players_pkey on players p  (cost=0.28..0.75 rows=1 width=17) (actual time=0.001..0.001 rows=1.00 loops=31)"
"                    Index Cond: (playerid = e.playerid)"
"                    Index Searches: 31"
"                    Buffers: shared hit=93"
"Planning:"
"  Buffers: shared hit=18"
"Planning Time: 0.470 ms"
"Execution Time: 0.262 ms"
```

## 14. Show all tournaments a specific team participated in

### Before adding indexes

```text
"QUERY PLAN"
"Hash Join  (cost=3.15..15.56 rows=2 width=144) (actual time=0.034..0.035 rows=2.00 loops=1)"
"  Hash Cond: (t.tournamentid = s.tournamentid)"
"  Buffers: shared hit=3"
"  ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=144) (actual time=0.016..0.016 rows=5.00 loops=1)"
"        Buffers: shared hit=1"
"  ->  Hash  (cost=3.12..3.12 rows=2 width=8) (actual time=0.014..0.014 rows=2.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"        Buffers: shared hit=2"
"        ->  Seq Scan on standings s  (cost=0.00..3.12 rows=2 width=8) (actual time=0.008..0.012 rows=2.00 loops=1)"
"              Filter: (teamid = 5)"
"              Rows Removed by Filter: 88"
"              Buffers: shared hit=2"
"Planning Time: 0.137 ms"
"Execution Time: 0.055 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Hash Join  (cost=3.15..15.56 rows=2 width=144) (actual time=0.063..0.066 rows=2.00 loops=1)"
"  Hash Cond: (t.tournamentid = s.tournamentid)"
"  Buffers: shared hit=3"
"  ->  Seq Scan on tournaments t  (cost=0.00..11.90 rows=190 width=144) (actual time=0.017..0.018 rows=5.00 loops=1)"
"        Buffers: shared hit=1"
"  ->  Hash  (cost=3.12..3.12 rows=2 width=8) (actual time=0.032..0.032 rows=2.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"        Buffers: shared hit=2"
"        ->  Seq Scan on standings s  (cost=0.00..3.12 rows=2 width=8) (actual time=0.015..0.022 rows=2.00 loops=1)"
"              Filter: (teamid = 5)"
"              Rows Removed by Filter: 88"
"              Buffers: shared hit=2"
"Planning Time: 0.270 ms"
"Execution Time: 0.094 ms"
```

## 15. Find the tournament winner based on played matches

### Before adding indexes

```text
"QUERY PLAN"
"Nested Loop  (cost=0.15..15.74 rows=1 width=40) (actual time=0.044..0.060 rows=1.00 loops=1)"
"  Join Filter: (((m.team1score > m.team2score) AND (t.teamid = m.team1id)) OR ((m.team2score > m.team1score) AND (t.teamid = m.team2id)))"
"  Rows Removed by Join Filter: 74"
"  Buffers: shared hit=6"
"  ->  Nested Loop  (cost=0.15..11.47 rows=1 width=12) (actual time=0.033..0.039 rows=1.00 loops=1)"
"        Join Filter: (mt.matchtypeid = m.matchtypeid)"
"        Rows Removed by Join Filter: 12"
"        Buffers: shared hit=4"
"        ->  Index Scan using matchtypes_matchtype_key on matchtypes mt  (cost=0.15..8.17 rows=1 width=4) (actual time=0.019..0.020 rows=1.00 loops=1)"
"              Index Cond: ((matchtype)::text = 'Final'::text)"
"              Index Searches: 1"
"              Buffers: shared hit=2"
"        ->  Seq Scan on matches m  (cost=0.00..3.21 rows=8 width=16) (actual time=0.010..0.017 rows=13.00 loops=1)"
"              Filter: ((tournamentid = 1) AND ((team1score > team2score) OR (team2score > team1score)))"
"              Rows Removed by Filter: 56"
"              Buffers: shared hit=2"
"  ->  Seq Scan on teams t  (cost=0.00..2.75 rows=75 width=12) (actual time=0.009..0.013 rows=75.00 loops=1)"
"        Buffers: shared hit=2"
"Planning Time: 0.296 ms"
"Execution Time: 0.083 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Nested Loop  (cost=1.07..10.49 rows=2 width=40) (actual time=0.075..0.135 rows=1.00 loops=1)"
"  Join Filter: (((m.team1score > m.team2score) AND (t.teamid = m.team1id)) OR ((m.team2score > m.team1score) AND (t.teamid = m.team2id)))"
"  Rows Removed by Join Filter: 74"
"  Buffers: shared hit=5"
"  ->  Seq Scan on teams t  (cost=0.00..2.75 rows=75 width=12) (actual time=0.019..0.026 rows=75.00 loops=1)"
"        Buffers: shared hit=2"
"  ->  Materialize  (cost=1.07..4.34 rows=2 width=12) (actual time=0.001..0.001 rows=1.00 loops=75)"
"        Storage: Memory  Maximum Storage: 17kB"
"        Buffers: shared hit=3"
"        ->  Hash Join  (cost=1.07..4.33 rows=2 width=12) (actual time=0.041..0.051 rows=1.00 loops=1)"
"              Hash Cond: (m.matchtypeid = mt.matchtypeid)"
"              Buffers: shared hit=3"
"              ->  Seq Scan on matches m  (cost=0.00..3.21 rows=8 width=16) (actual time=0.010..0.024 rows=13.00 loops=1)"
"                    Filter: ((tournamentid = 1) AND ((team1score > team2score) OR (team2score > team1score)))"
"                    Rows Removed by Filter: 56"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=1.06..1.06 rows=1 width=4) (actual time=0.015..0.015 rows=1.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=1"
"                    ->  Seq Scan on matchtypes mt  (cost=0.00..1.06 rows=1 width=4) (actual time=0.010..0.011 rows=1.00 loops=1)"
"                          Filter: ((matchtype)::text = 'Final'::text)"
"                          Rows Removed by Filter: 4"
"                          Buffers: shared hit=1"
"Planning Time: 0.425 ms"
"Execution Time: 0.176 ms"
```

## 16. Show the number of teams and players for each tournament

### Before adding indexes

```text
"QUERY PLAN"
"GroupAggregate  (cost=121.97..137.37 rows=190 width=154) (actual time=1.252..1.435 rows=5.00 loops=1)"
"  Group Key: t.name"
"  Buffers: shared hit=23"
"  ->  Sort  (cost=121.97..125.35 rows=1350 width=146) (actual time=1.208..1.255 rows=1350.00 loops=1)"
"        Sort Key: t.name, s.teamid"
"        Sort Method: quicksort  Memory: 110kB"
"        Buffers: shared hit=23"
"        ->  Hash Join  (cost=10.41..51.78 rows=1350 width=146) (actual time=0.101..0.379 rows=1350.00 loops=1)"
"              Hash Cond: (p.teamid = s.teamid)"
"              Buffers: shared hit=23"
"              ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=8) (actual time=0.012..0.061 rows=1125.00 loops=1)"
"                    Buffers: shared hit=11"
"              ->  Hash  (cost=9.28..9.28 rows=90 width=142) (actual time=0.080..0.082 rows=90.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 13kB"
"                    Buffers: shared hit=12"
"                    ->  Nested Loop  (cost=0.15..9.28 rows=90 width=142) (actual time=0.025..0.064 rows=90.00 loops=1)"
"                          Buffers: shared hit=12"
"                          ->  Seq Scan on standings s  (cost=0.00..2.90 rows=90 width=8) (actual time=0.007..0.011 rows=90.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Memoize  (cost=0.15..0.71 rows=1 width=142) (actual time=0.000..0.000 rows=1.00 loops=90)"
"                                Cache Key: s.tournamentid"
"                                Cache Mode: logical"
"                                Hits: 85  Misses: 5  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"                                Buffers: shared hit=10"
"                                ->  Index Scan using tournaments_pkey on tournaments t  (cost=0.14..0.70 rows=1 width=142) (actual time=0.003..0.003 rows=1.00 loops=5)"
"                                      Index Cond: (tournamentid = s.tournamentid)"
"                                      Index Searches: 5"
"                                      Buffers: shared hit=10"
"Planning Time: 0.276 ms"
"Execution Time: 1.479 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"GroupAggregate  (cost=121.97..137.37 rows=190 width=154) (actual time=1.211..1.390 rows=5.00 loops=1)"
"  Group Key: t.name"
"  Buffers: shared hit=23"
"  ->  Sort  (cost=121.97..125.35 rows=1350 width=146) (actual time=1.167..1.212 rows=1350.00 loops=1)"
"        Sort Key: t.name, s.teamid"
"        Sort Method: quicksort  Memory: 110kB"
"        Buffers: shared hit=23"
"        ->  Hash Join  (cost=10.41..51.78 rows=1350 width=146) (actual time=0.095..0.379 rows=1350.00 loops=1)"
"              Hash Cond: (p.teamid = s.teamid)"
"              Buffers: shared hit=23"
"              ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=8) (actual time=0.011..0.058 rows=1125.00 loops=1)"
"                    Buffers: shared hit=11"
"              ->  Hash  (cost=9.28..9.28 rows=90 width=142) (actual time=0.076..0.078 rows=90.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 13kB"
"                    Buffers: shared hit=12"
"                    ->  Nested Loop  (cost=0.15..9.28 rows=90 width=142) (actual time=0.022..0.062 rows=90.00 loops=1)"
"                          Buffers: shared hit=12"
"                          ->  Seq Scan on standings s  (cost=0.00..2.90 rows=90 width=8) (actual time=0.004..0.009 rows=90.00 loops=1)"
"                                Buffers: shared hit=2"
"                          ->  Memoize  (cost=0.15..0.71 rows=1 width=142) (actual time=0.000..0.000 rows=1.00 loops=90)"
"                                Cache Key: s.tournamentid"
"                                Cache Mode: logical"
"                                Hits: 85  Misses: 5  Evictions: 0  Overflows: 0  Memory Usage: 1kB"
"                                Buffers: shared hit=10"
"                                ->  Index Scan using tournaments_pkey on tournaments t  (cost=0.14..0.70 rows=1 width=142) (actual time=0.003..0.003 rows=1.00 loops=5)"
"                                      Index Cond: (tournamentid = s.tournamentid)"
"                                      Index Searches: 5"
"                                      Buffers: shared hit=10"
"Planning:"
"  Buffers: shared hit=4"
"Planning Time: 0.304 ms"
"Execution Time: 1.427 ms"
```

## 17. Top scorers by team

### Before adding indexes

```text
"QUERY PLAN"
"Sort  (cost=59.35..59.70 rows=142 width=48) (actual time=0.369..0.371 rows=52.00 loops=1)"
"  Sort Key: unnamed_subquery.goals DESC"
"  Sort Method: quicksort  Memory: 27kB"
"  Buffers: shared hit=16"
"  ->  Subquery Scan on unnamed_subquery  (cost=52.14..54.27 rows=142 width=48) (actual time=0.335..0.358 rows=52.00 loops=1)"
"        Buffers: shared hit=16"
"        ->  Unique  (cost=52.14..52.85 rows=142 width=69) (actual time=0.335..0.353 rows=52.00 loops=1)"
"              Buffers: shared hit=16"
"              ->  Sort  (cost=52.14..52.50 rows=142 width=69) (actual time=0.334..0.340 rows=126.00 loops=1)"
"                    Sort Key: te.teamid, (count(*)) DESC"
"                    Sort Method: quicksort  Memory: 34kB"
"                    Buffers: shared hit=16"
"                    ->  HashAggregate  (cost=44.94..47.07 rows=142 width=69) (actual time=0.272..0.300 rows=126.00 loops=1)"
"                          Group Key: te.teamid, p.playerid"
"                          Batches: 1  Memory Usage: 48kB"
"                          Buffers: shared hit=16"
"                          ->  Hash Join  (cost=12.78..43.87 rows=142 width=29) (actual time=0.083..0.236 rows=142.00 loops=1)"
"                                Hash Cond: (p.teamid = te.teamid)"
"                                Buffers: shared hit=16"
"                                ->  Hash Join  (cost=9.09..39.79 rows=142 width=21) (actual time=0.052..0.184 rows=142.00 loops=1)"
"                                      Hash Cond: (p.playerid = e.playerid)"
"                                      Buffers: shared hit=14"
"                                      ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=21) (actual time=0.004..0.046 rows=1125.00 loops=1)"
"                                            Buffers: shared hit=11"
"                                      ->  Hash  (cost=7.31..7.31 rows=142 width=4) (actual time=0.045..0.045 rows=142.00 loops=1)"
"                                            Buckets: 1024  Batches: 1  Memory Usage: 13kB"
"                                            Buffers: shared hit=3"
"                                            ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=4) (actual time=0.007..0.033 rows=142.00 loops=1)"
"                                                  Filter: (type = 'Goal'::eventtype)"
"                                                  Rows Removed by Filter: 203"
"                                                  Buffers: shared hit=3"
"                                ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.027..0.027 rows=75.00 loops=1)"
"                                      Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                                      Buffers: shared hit=2"
"                                      ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.011..0.017 rows=75.00 loops=1)"
"                                            Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=10"
"Planning Time: 0.310 ms"
"Execution Time: 0.411 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Sort  (cost=59.35..59.70 rows=142 width=48) (actual time=0.488..0.491 rows=52.00 loops=1)"
"  Sort Key: unnamed_subquery.goals DESC"
"  Sort Method: quicksort  Memory: 27kB"
"  Buffers: shared hit=16"
"  ->  Subquery Scan on unnamed_subquery  (cost=52.14..54.27 rows=142 width=48) (actual time=0.454..0.477 rows=52.00 loops=1)"
"        Buffers: shared hit=16"
"        ->  Unique  (cost=52.14..52.85 rows=142 width=69) (actual time=0.453..0.471 rows=52.00 loops=1)"
"              Buffers: shared hit=16"
"              ->  Sort  (cost=52.14..52.50 rows=142 width=69) (actual time=0.452..0.456 rows=126.00 loops=1)"
"                    Sort Key: te.teamid, (count(*)) DESC"
"                    Sort Method: quicksort  Memory: 34kB"
"                    Buffers: shared hit=16"
"                    ->  HashAggregate  (cost=44.94..47.07 rows=142 width=69) (actual time=0.388..0.417 rows=126.00 loops=1)"
"                          Group Key: te.teamid, p.playerid"
"                          Batches: 1  Memory Usage: 48kB"
"                          Buffers: shared hit=16"
"                          ->  Hash Join  (cost=12.78..43.87 rows=142 width=29) (actual time=0.181..0.347 rows=142.00 loops=1)"
"                                Hash Cond: (p.teamid = te.teamid)"
"                                Buffers: shared hit=16"
"                                ->  Hash Join  (cost=9.09..39.79 rows=142 width=21) (actual time=0.112..0.255 rows=142.00 loops=1)"
"                                      Hash Cond: (p.playerid = e.playerid)"
"                                      Buffers: shared hit=14"
"                                      ->  Seq Scan on players p  (cost=0.00..22.25 rows=1125 width=21) (actual time=0.006..0.059 rows=1125.00 loops=1)"
"                                            Buffers: shared hit=11"
"                                      ->  Hash  (cost=7.31..7.31 rows=142 width=4) (actual time=0.095..0.096 rows=142.00 loops=1)"
"                                            Buckets: 1024  Batches: 1  Memory Usage: 13kB"
"                                            Buffers: shared hit=3"
"                                            ->  Seq Scan on events e  (cost=0.00..7.31 rows=142 width=4) (actual time=0.010..0.067 rows=142.00 loops=1)"
"                                                  Filter: (type = 'Goal'::eventtype)"
"                                                  Rows Removed by Filter: 203"
"                                                  Buffers: shared hit=3"
"                                ->  Hash  (cost=2.75..2.75 rows=75 width=12) (actual time=0.057..0.057 rows=75.00 loops=1)"
"                                      Buckets: 1024  Batches: 1  Memory Usage: 12kB"
"                                      Buffers: shared hit=2"
"                                      ->  Seq Scan on teams te  (cost=0.00..2.75 rows=75 width=12) (actual time=0.018..0.033 rows=75.00 loops=1)"
"                                            Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=14"
"Planning Time: 0.580 ms"
"Execution Time: 0.558 ms"
```

## 18. Matches of a specific referee

### Before adding indexes

```text
"QUERY PLAN"
"Hash Join  (cost=5.93..8.98 rows=1 width=60) (actual time=0.051..0.055 rows=1.00 loops=1)"
"  Hash Cond: (t2.teamid = m.team2id)"
"  Buffers: shared hit=6"
"  ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.010..0.013 rows=75.00 loops=1)"
"        Buffers: shared hit=2"
"  ->  Hash  (cost=5.92..5.92 rows=1 width=28) (actual time=0.031..0.031 rows=1.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"        Buffers: shared hit=4"
"        ->  Hash Join  (cost=2.88..5.92 rows=1 width=28) (actual time=0.025..0.030 rows=1.00 loops=1)"
"              Hash Cond: (t1.teamid = m.team1id)"
"              Buffers: shared hit=4"
"              ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.002..0.005 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=2.86..2.86 rows=1 width=24) (actual time=0.014..0.014 rows=1.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on matches m  (cost=0.00..2.86 rows=1 width=24) (actual time=0.007..0.011 rows=1.00 loops=1)"
"                          Filter: (refereeid = 57)"
"                          Rows Removed by Filter: 68"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=8"
"Planning Time: 0.227 ms"
"Execution Time: 0.082 ms"
```

### After adding indexes

```text
"QUERY PLAN"
"Hash Join  (cost=5.93..8.98 rows=1 width=60) (actual time=0.051..0.055 rows=1.00 loops=1)"
"  Hash Cond: (t2.teamid = m.team2id)"
"  Buffers: shared hit=6"
"  ->  Seq Scan on teams t2  (cost=0.00..2.75 rows=75 width=12) (actual time=0.009..0.011 rows=75.00 loops=1)"
"        Buffers: shared hit=2"
"  ->  Hash  (cost=5.92..5.92 rows=1 width=28) (actual time=0.033..0.033 rows=1.00 loops=1)"
"        Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"        Buffers: shared hit=4"
"        ->  Hash Join  (cost=2.88..5.92 rows=1 width=28) (actual time=0.025..0.029 rows=1.00 loops=1)"
"              Hash Cond: (t1.teamid = m.team1id)"
"              Buffers: shared hit=4"
"              ->  Seq Scan on teams t1  (cost=0.00..2.75 rows=75 width=12) (actual time=0.003..0.006 rows=75.00 loops=1)"
"                    Buffers: shared hit=2"
"              ->  Hash  (cost=2.86..2.86 rows=1 width=24) (actual time=0.013..0.013 rows=1.00 loops=1)"
"                    Buckets: 1024  Batches: 1  Memory Usage: 9kB"
"                    Buffers: shared hit=2"
"                    ->  Seq Scan on matches m  (cost=0.00..2.86 rows=1 width=24) (actual time=0.007..0.011 rows=1.00 loops=1)"
"                          Filter: (refereeid = 57)"
"                          Rows Removed by Filter: 68"
"                          Buffers: shared hit=2"
"Planning:"
"  Buffers: shared hit=16"
"Planning Time: 0.300 ms"
"Execution Time: 0.081 ms"
```
